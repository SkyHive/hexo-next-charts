# hexo-next-charts

è®©åšä¸»åƒå†™é…ç½®ä¸€æ ·å†™å›¾è¡¨ã€‚é€šè¿‡ä¸€è¡Œ Tag æŒ‡ä»¤ï¼Œå°† Markdown ä¸­çš„ YAML æ•°æ®å¯¹è±¡æ˜ å°„ä¸º ECharts è§†å›¾ã€‚

## ğŸŒŸ ç‰¹æ€§

- **ç®€å•æ˜“ç”¨**ï¼šä¸€è¡Œæ ‡ç­¾ `{% echart radar my_skills %}` å³å¯ç”Ÿæˆå›¾è¡¨ã€‚
- **æ•°æ®è§£è€¦**ï¼šä» Front-matter æˆ–å…¨å±€é…ç½®ä¸­è¯»å–æ•°æ®ã€‚
- **æš—é»‘æ¨¡å¼**ï¼šè‡ªåŠ¨é€‚é…ä¸»é¢˜åˆ‡æ¢ï¼ˆæ”¯æŒ Butterfly, Next ç­‰ä¸»æµä¸»é¢˜ï¼‰ã€‚
- **æŒ‰éœ€åŠ è½½**ï¼šä»…åœ¨ä½¿ç”¨å›¾è¡¨çš„é¡µé¢åŠ è½½ ECharts èµ„æºã€‚
- **å“åº”å¼**ï¼šå›¾è¡¨è‡ªåŠ¨è·Ÿéšçª—å£å¤§å°è°ƒæ•´ã€‚
- **æ™ºèƒ½åœ°å›¾åŠ è½½**ï¼šè‡ªåŠ¨ä¸‹è½½å¹¶ç¼“å­˜é«˜ç²¾åº¦ GeoJSONï¼Œæ”¯æŒ CDN å›é€€ã€‚
- **è‡ªåŠ¨åæ ‡è¡¥å…¨**ï¼šåªéœ€è¾“å…¥åŸå¸‚åï¼ˆå¦‚ "London", "å¼ æ–"ï¼‰ï¼Œæ„å»ºæ—¶è‡ªåŠ¨è·å–ç»çº¬åº¦å¹¶æ³¨å…¥ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤åæ ‡æ–‡ä»¶ã€‚
- **æ ‡å‡†åŸå¸‚ä»£ç **ï¼šæ”¯æŒ UN/LOCODE å’Œ IATA ä»£ç ï¼ˆå¦‚ `CN SHA`, `PVG`ï¼‰ã€‚
- **å¤šæºæ•°æ®æ”¯æŒ**ï¼šè‡ªåŠ¨ä»é«˜å¾·å¼€æ”¾å¹³å° (Amap) æˆ– OpenStreetMap è·å–åœ°ç†ä¿¡æ¯ã€‚

## ğŸš€ å®‰è£…

åœ¨ä½ çš„ Hexo æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
npm install hexo-next-charts --save
```

## âš™ï¸ é…ç½® (å¯é€‰)

ä¸ºäº†è·å¾—æ›´å‡†ç¡®çš„å›½å†…åŸå¸‚å®šä½ï¼Œå»ºè®®åœ¨ Hexo é¡¹ç›®çš„ `_config.yml` ä¸­é…ç½®é«˜å¾·åœ°å›¾ API Keyï¼ˆWebæœåŠ¡ç±»å‹ï¼‰ï¼š

```yaml
next_charts:
  amap_key: your_amap_key_here # å¯é€‰ï¼Œè‹¥ä¸é…ç½®åˆ™é»˜è®¤ä½¿ç”¨ OpenStreetMap
```

## ğŸ“– è¯­æ³•

```markdown
{% echart [type] [data_source] [options] %}
```

- **type**: å›¾è¡¨ç±»å‹ï¼ˆæ”¯æŒ `radar`, `map`, `tree`ï¼‰ã€‚
- **data_source**: æ•°æ®è·¯å¾„ï¼ˆå¯¹åº” Front-matter é‡Œçš„ keyï¼‰ã€‚
- **options**: (å¯é€‰) é”®å€¼å¯¹å‚æ•°ï¼Œå¦‚ `title:"æ ‡é¢˜"` `height:500px` `map:china`ã€‚

### ç¤ºä¾‹ 1ï¼šé›·è¾¾å›¾ (Radar)

**Front-matter:**

```yaml
skills:
  - { label: "Javascript", value: 90 }
  - { label: "Python", value: 85 }
  - { label: "K8s", value: 70 }
```

**Markdown:**

```markdown
{% echart radar skills title:"æˆ‘çš„æŠ€èƒ½" %}
```

### ç¤ºä¾‹ 2ï¼šè¶³è¿¹å›¾ (Map)

**Front-matter:**

```yaml
travels:
  - "Shanghai" # è‡ªåŠ¨è·å–åæ ‡
  - "å¼ æ–" # ä¸­æ–‡åè‡ªåŠ¨æ”¯æŒ
  - "London" # è‹±æ–‡åè‡ªåŠ¨æ”¯æŒ
  - { code: "MY PEN", label: "æ§ŸåŸ", effect: true } # æ··åˆå¯¹è±¡å†™æ³•
```

**Markdown:**

```markdown
{% echart map travels title:"æˆ‘çš„è¶³è¿¹" map:china %}
```

> **åœ°å›¾ç±»å‹è¯´æ˜**ï¼š
>
> - `map:world` - ä¸–ç•Œåœ°å›¾ï¼ˆé»˜è®¤ï¼Œæ˜¾ç¤ºå›½å®¶è¾¹ç•Œï¼‰
> - `map:china` - ä¸­å›½åœ°å›¾ï¼ˆæ˜¾ç¤ºçœç•Œçº¿ï¼‰
>
> **æ•°æ®æ ¼å¼æ”¯æŒ**ï¼š
>
> 1. **åŸå¸‚åç§°ï¼ˆæ¨èï¼‰**ï¼šç›´æ¥ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡åç§°ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨æŸ¥è¯¢åæ ‡ã€‚
>    - ç¤ºä¾‹ï¼š`"ä¸Šæµ·"`, `"å¼ æ–"`, `"London"`, `"New York"`
> 2. **æ ‡å‡†ä»£ç **ï¼šæ”¯æŒ UN/LOCODE æˆ– IATA æœºåœºä»£ç ã€‚
>    - ç¤ºä¾‹ï¼š`"CN SHA"`, `"PVG"`, `"LAX"`
> 3. **é«˜çº§å¯¹è±¡**ï¼šè‡ªå®šä¹‰æ ‡ç­¾æˆ–é«˜äº®æ•ˆæœã€‚
>    - ç¤ºä¾‹ï¼š`{ name: "Beijing", label: "é¦–éƒ½", effect: true }`

### ç¤ºä¾‹ 3ï¼šæŠ€èƒ½æ ‘ (Tree)

**Front-matter:**

```yaml
skills_tree:
  name: "ç¼–ç¨‹è¯­è¨€"
  children:
    - name: "å‰ç«¯"
      children: [{ name: "Vue" }, { name: "React" }]
    - name: "åç«¯"
      children: [{ name: "Python" }, { name: "Go" }]
```

**Markdown:**

```markdown
{% echart tree skills_tree title:"æŠ€èƒ½æ ‘" %}
```

---

## ğŸ—ºï¸ åœ°å›¾èµ„æºä¸åæ ‡ç®¡ç†

æ’ä»¶å†…ç½®äº† **AssetsManager** å’Œ **GeoManager**ï¼Œè‡ªåŠ¨åŒ–å¤„ç†åœ°ç†æ•°æ®ï¼š

1.  **åœ°å›¾æ–‡ä»¶**ï¼šè‡ªåŠ¨ä¸‹è½½/ç¼“å­˜ ECharts éœ€è¦çš„ GeoJSON æ–‡ä»¶ï¼ˆå¦‚ä¸­å›½åœ°å›¾ã€ä¸–ç•Œåœ°å›¾ï¼‰ã€‚
2.  **åæ ‡è¡¥å…¨ (Geo-Auto-Resolver)**ï¼š
    - åœ¨ `hexo generate` æ„å»ºé˜¶æ®µï¼Œæ’ä»¶ä¼šè‡ªåŠ¨æå–æ–‡ç« ä¸­å‡ºç°çš„åŸå¸‚åç§°ã€‚
    - è‡ªåŠ¨è°ƒç”¨ APIï¼ˆé«˜å¾·/OSMï¼‰è·å–ç»çº¬åº¦ã€‚
    - ç»“æœç¼“å­˜è‡³ `source/_data/places.json`ï¼Œç¡®ä¿æ„å»ºé€Ÿåº¦å’Œç¨³å®šæ€§ã€‚

ä½ æ— éœ€æ‰‹åŠ¨æŸ¥æ‰¾ç»çº¬åº¦ï¼Œåªéœ€åœ¨ Front-matter ä¸­å†™ä¸‹åŸå¸‚åå­—å³å¯ã€‚

---

## ğŸ›  å¼€å‘ä¸æµ‹è¯•

å¦‚æœä½ æƒ³ä¿®æ”¹æ’ä»¶æˆ–è´¡çŒ®ä»£ç ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤åœ¨æœ¬åœ° Hexo ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ï¼š

### 1. å‡†å¤‡æ’ä»¶æºç 

ç¡®ä¿ä½ åœ¨ `hexo-next-charts` ç›®å½•ä¸­ã€‚

### 2. é“¾æ¥åˆ° Hexo é¡¹ç›®

åœ¨ä½ çš„ **Hexo åšå®¢æ ¹ç›®å½•**ä¸­ï¼Œä½¿ç”¨ `npm link` æŒ‚è½½æœ¬åœ°å¼€å‘çš„æ’ä»¶ï¼š

```bash
# åœ¨ hexo-next-charts ç›®å½•è¿è¡Œ
npm link

# è¿›å…¥ä½ çš„ Hexo åšå®¢æ ¹ç›®å½•è¿è¡Œ
npm link hexo-next-charts
```

### 3. é…ç½®æµ‹è¯•æ•°æ®

åœ¨ Hexo çš„ä¸€ç¯‡æ–‡ç« ä¸­æ·»åŠ ç‚¹æµ‹è¯•æ•°æ®ï¼š

```yaml
---
title: Chart Test
layout: post
my_chart_data:
  - { label: "A", value: 50 }
  - { label: "B", value: 80 }
---
{ % echart radar my_chart_data % }
```

### 4. è¿è¡Œ Hexo

```bash
hexo clean && hexo s
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:4000` æŸ¥çœ‹æ•ˆæœã€‚

### 5. è¿è¡Œå†…ç½®éªŒè¯è„šæœ¬

æœ¬ä»“åº“æä¾›äº†ä¸€ä¸ªç®€å•çš„è„šæœ¬æ¥éªŒè¯æ ¸å¿ƒé€»è¾‘ï¼ˆæ•°æ®è§£æã€æ ‡ç­¾æ¸²æŸ“ã€æ³¨å…¥é€»è¾‘ï¼‰ï¼š

```bash
node verify.js
```

## æ‰©å±•å›¾è¡¨

ä½ å¯ä»¥é€šè¿‡åœ¨ `lib/charts/` ç›®å½•ä¸‹æ·»åŠ æ–°çš„ JS æ–‡ä»¶æ¥æ‰©å±•å›¾è¡¨ç±»å‹ã€‚æ¯ä¸ªæ–‡ä»¶å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶åŸå§‹æ•°æ®å¹¶è¿”å› ECharts çš„ `option` å¯¹è±¡ã€‚

---

## License

MIT
